<div>
    <!-- <h2>टूर आणि ट्रॅव्हल लोन</h2> -->
    <form nz-form>
        <nz-spin [nzSpinning]="isSpinning">
            <div nz-row>
                <div nz-col nzSpan="24">
                    <div nz-row class="my-box">
                        <div nz-col nzSpan="12">
                            <nz-form-item>
                                <nz-form-label nzRequired nzNoColon> {{'tour-and-travel-loan.label1'|translate }}
                                </nz-form-label>
                                <nz-form-control nzErrorTip="{{'common.nzErrorTip'| translate}}">
                                    <input nz-input name="TRAVELLING_PLACE_NAME" type="text"
                                        [(ngModel)]="data.TRAVELLING_PLACE_NAME" required />
                                </nz-form-control>
                            </nz-form-item>
                        </div>

                        <div nz-col nzSpan="7">
                            <nz-form-item>
                                <nz-form-label nzRequired nzNoColon> {{'tour-and-travel-loan.label2'|translate }}
                                </nz-form-label>
                                <nz-form-control nzErrorTip="{{'common.nzErrorTip'| translate}}">
                                    <nz-input-number style="width: 100%;" name="TOTAL_FAMILY_MEMBERS_TO_TRAVELS"
                                        nzPlaceHolder="{{'tour-and-travel-loan.placeholder1'|translate }}"
                                        [(ngModel)]="data.TOTAL_FAMILY_MEMBERS_TO_TRAVELS" [nzMin]="0"
                                        [nzMax]="99999999999999999999999999" [nzStep]="1" required></nz-input-number>
                                </nz-form-control>
                            </nz-form-item>
                        </div>
                        <div nz-col nzSpan="5">
                            <nz-form-item>
                                <nz-form-label nzRequired nzNoColon> {{'tour-and-travel-loan.label3'|translate }}</nz-form-label>
                                <nz-form-control nzErrorTip="{{'common.nzErrorTip'| translate}}">
                                    <nz-input-number style="width: 100%;" name="TRAVELLING_TIME"
                                        nzPlaceHolder="{{'tour-and-travel-loan.placeholder2'|translate }}" [(ngModel)]="data.TRAVELLING_TIME"
                                        [nzMin]="0" [nzMax]="99999999999999999999999999" [nzStep]="1" required></nz-input-number>
                                </nz-form-control>
                            </nz-form-item>
                        </div>
                        <div nz-col nzSpan="6">
                            <nz-form-item>
                                <nz-form-label nzRequired nzNoColon>{{'tour-and-travel-loan.label4'|translate }}</nz-form-label>
                                <nz-form-control nzErrorTip="{{'common.nzErrorTip'| translate}}">
                                    <input nz-input [textMask]="{mask: mask,guide:true,keepCharPositions:true,pipe:autoCorrectedDatePipe}"
                                     placeholder="dd/mm/yyyy" type="text" [(ngModel)]="data.TRAVELLING_START_DATE" name="TRAVELLING_START_DATE" />
                                </nz-form-control>
                            </nz-form-item>
                        </div>
                        <div nz-col nzSpan="6">
                            <nz-form-item>
                                <nz-form-label nzRequired nzNoColon>{{'tour-and-travel-loan.label5'|translate }}</nz-form-label>
                                <nz-form-control nzErrorTip="{{'common.nzErrorTip'| translate}}">
                                    <input nz-input [textMask]="{mask: mask,guide:true,keepCharPositions:true,pipe:autoCorrectedDatePipe}"
                                    placeholder="dd/mm/yyyy" type="text" [(ngModel)]="data.TRAVELLING_RETURN_DATE" name="TRAVELLING_RETURN_DATE" />
                                </nz-form-control>
                            </nz-form-item>
                        </div>
                        <div nz-col nzSpan="12">
                            <nz-form-item>
                                <nz-form-label  nzNoColon> {{'tour-and-travel-loan.label6'|translate }} </nz-form-label>
                                <nz-form-control>
                                    <nz-radio-group name="IS_TRAVELLING_SELF_OR_TRAVELLING_AGENCY" 
                                        [(ngModel)]="data.IS_TRAVELLING_SELF_OR_TRAVELLING_AGENCY" nzButtonStyle="solid"
                                        required>
                                        <label nz-radio nzValue="S" (click)="agentorTravel()">{{'tour-and-travel-loan.label6.option1'|translate }}</label>
                                        <label nz-radio nzValue="A" (click)="agentorTravel()">{{'tour-and-travel-loan.label6.option2'|translate }}</label>
                                    </nz-radio-group>

                                </nz-form-control>
                            </nz-form-item>
                        </div>
                        
                        
                        
                        <div nz-col nzSpan="12">
                            <nz-form-item>
                                <nz-form-label style="text-align: left;" nzNoColon>{{'tour-and-travel-loan.label7'|translate }}<br>{{'tour-and-travel-loan.label8'|translate }}
                                </nz-form-label>
                                <nz-form-control nzErrorTip="{{'common.nzErrorTip'| translate}}">
                                    <nz-switch name="2" [(ngModel)]="data.IS_LTC_PROVIDED"  
                                    nzCheckedChildren="{{'common.switch.yes'|translate}}"
                                    nzUnCheckedChildren="{{'common.switch.no'|translate}}">
                                    </nz-switch>
                                </nz-form-control>
                            </nz-form-item>
                        </div>
                        <div nz-col nzSpan="12">
                            <nz-form-item>
                                <nz-form-label nzNoColon>{{'tour-and-travel-loan.label9'|translate }}</nz-form-label>
                                <nz-form-control>
                                    <nz-radio-group name="TRAVELING_PLACE" [(ngModel)]="data.TRAVELING_PLACE"
                                        nzButtonStyle="solid" required>
                                        <label nz-radio nzValue="D">{{'tour-and-travel-loan.label9.option1'|translate }}</label>
                                        <label nz-radio nzValue="F">{{'tour-and-travel-loan.label9.option2'|translate }}</label>
                                    </nz-radio-group>

                                </nz-form-control>
                            </nz-form-item>
                        </div>

                    </div>

                    
                    <div nz-row class="my-box" *ngIf="data.IS_TRAVELLING_SELF_OR_TRAVELLING_AGENCY == 'A'">
                        <div nz-col nzSpan="12">
                            <nz-form-item>
                                <nz-form-label nzRequired nzNoColon>{{'tour-and-travel-loan.label10'|translate }}</nz-form-label>
                                <nz-form-control nzErrorTip="{{'common.nzErrorTip'| translate}}">
                                    <input nz-input name="TRAVEL_AGENCY_NAME" type="text"
                                        [(ngModel)]="data.TRAVEL_AGENCY_NAME" required />
                                </nz-form-control>
                            </nz-form-item>
                        </div>
                        <div nz-col nzSpan="8">
                            <nz-form-item>
                                <nz-form-label nzRequired nzNoColon>{{'tour-and-travel-loan.label11'|translate }} </nz-form-label>
                                <nz-form-control nzErrorTip="{{'common.nzErrorTip'| translate}}">
                                    <nz-input-number style="width: 100%;" name="TRAVEL_AGENCY_QUOTATION_AMOUNT"
                                        nzPlaceHolder="{{'tour-and-travel-loan.placeholder3'|translate }}"
                                        [(ngModel)]="data.TRAVEL_AGENCY_QUOTATION_AMOUNT" [nzMin]="1"
                                        [nzMax]="99999999999999999999999999" [nzStep]="1" required></nz-input-number>
                                </nz-form-control>
                            </nz-form-item>
                        </div>
                        <!-- <div nz-col nzSpan="12">
                            <div nz-row> -->
                        <!-- <div nz-col nzSpan="24">
                                    <nz-form-label nzRequired nzNoColon>ट्रॅव्हल एजंटला ऍडव्हान्स दिला आहे का?
                                    </nz-form-label>
                                </div> -->
                        <div nz-col nzSpan="6">
                            <nz-form-item>
                                <nz-form-label nzRequired nzNoColon>{{'tour-and-travel-loan.label12'|translate }}
                                </nz-form-label>
                                <nz-form-control>
                                    <nz-switch name="IS_GIVE_ADVANCE_AMOUNT_TO_TRAVEL_AGENCY"
                                        [(ngModel)]="data.IS_GIVE_ADVANCE_AMOUNT_TO_TRAVEL_AGENCY"
                                         nzCheckedChildren="{{'common.switch.yes'|translate}}"  nzUnCheckedChildren="{{'common.switch.no'|translate}}">
                                    </nz-switch>
                                </nz-form-control>
                            </nz-form-item>
                        </div>
                        <div nz-col nzSpan="6" *ngIf="data.IS_GIVE_ADVANCE_AMOUNT_TO_TRAVEL_AGENCY">
                            <nz-form-item>
                                <nz-form-label nzRequired nzNoColon>{{'tour-and-travel-loan.label13'|translate }}</nz-form-label>
                                <nz-form-control>
                                    <nz-input-number style="width: 100%;" name="ADVANCE_AMOUNT" type="text"
                                        nzPlaceHolder="{{'tour-and-travel-loan.label13'|translate }}" [(ngModel)]="data.ADVANCE_AMOUNT"
                                        [nzMin]="0" [nzMax]="99999999999999999999999999" [nzStep]="1" required></nz-input-number>
                                </nz-form-control>
                            </nz-form-item>
                        </div>
                        <!-- </div>
                        </div> -->
                    </div>
                </div>
            </div>
            <div nz-row>
                <nz-divider nzText=" {{'tour-and-travel-loan.text1'|translate }} "></nz-divider>
                <div nz-col nzXs="24">
                    <div nz-row nzType="flex">
                        <div nz-col nzXs="24" nzSm="24" nzMd="20" nzLg="20" nzXl="12">

                        </div>
                        <div nz-col nzXs="24" nzSm="24" nzMd="4" nzLg="6" nzXl="12"
                            style="display: flex;justify-content: flex-end">
                            <form nz-form [nzLayout]="'inline'">
                                <nz-form-item>
                                    <button nz-button nzType="primary" (click)="add2()" nzJustify="end">
                                        <i nz-icon nzType="plus"></i>{{'tour-and-travel-loan.button1'|translate }}
                                    </button>
                                </nz-form-item>
                            </form>
                        </div>
                    </div>
                    <nz-table [nzShowPagination]="false" style="height: 250px;" class="my-scroll no-wrap1" nzBordered
                        #table [nzFrontPagination]="false" [nzData]="dataListss" [nzLoading]="loadingRecords"
                        [nzTotal]="totalRecords" [(nzPageIndex)]="pageIndex" [(nzPageSize)]="pageSize">
                        <thead>
                            <tr>
                                <th>{{'tour-and-travel-loan.th1'|translate }}</th>
                                <th>{{'tour-and-travel-loan.th2'|translate }}</th>
                                <th>{{'tour-and-travel-loan.th3'|translate }}</th>
                                <th>{{'tour-and-travel-loan.th4'|translate }}</th>

                                <th>{{'tour-and-travel-loan.th5'|translate }}</th>
                                <th *ngIf="isAgent">{{'tour-and-travel-loan.th6'|translate }}</th>
                                <th>{{'tour-and-travel-loan.th7'|translate }}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let data of table.data;index as i">
                                <td>
                                    <a (click)="edit2(data,i)"><i nz-icon nzType="edit" nzTheme="twotone"></i></a>
                                </td>
                                <td> 
                                    <span *ngIf="data['MEANS_OF_TRAVELS']=='1'">{{'tour-and-travel-loan.td1'|translate }}</span>
                                    <span *ngIf="data['MEANS_OF_TRAVELS']=='2'">{{'tour-and-travel-loan.td2'|translate }}</span>
                                    <span *ngIf="data['MEANS_OF_TRAVELS']=='3'">{{'tour-and-travel-loan.td3'|translate }}</span>
                                    <span *ngIf="data['MEANS_OF_TRAVELS']=='4'">{{'tour-and-travel-loan.td4'|translate }}</span>
                                    <span *ngIf="data['MEANS_OF_TRAVELS']=='5'">{{'tour-and-travel-loan.td5'|translate }}</span>
                                </td>
                                <td> {{data['FROM_LOCATION']}} </td>
                                <td> {{data['TO_LOCATION']}} </td>

                                <td> {{data['TRAVEL_DATE']}} </td>
                                <td *ngIf="isAgent"> {{data['TICKET_AMOUNT']}} </td>
                                <td> <i nz-icon *ngIf="data.IS_TICKET_TAKEN" [nzType]="'check-circle'"
                                        [nzTheme]="'twotone'" [nzTwotoneColor]="'#52c41a'"></i>
                                    <i nz-icon *ngIf="!data.IS_TICKET_TAKEN" [nzType]="'close-circle'"
                                        [nzTheme]="'twotone'" [nzTwotoneColor]="'#f50'"></i> </td>
                            </tr>
                        </tbody>
                    </nz-table>
                </div>
            </div>
            <div nz-row *ngIf='data.TRAVELING_PLACE == "F"'>
                <nz-divider nzText="{{'tour-and-travel-loan.text2'|translate }}"></nz-divider>
                <div nz-col nzXs="24">
                    <div nz-row nzType="flex">
                        <div nz-col nzXs="24" nzSm="24" nzMd="20" nzLg="20" nzXl="12">

                        </div>
                        <div nz-col nzXs="24" nzSm="24" nzMd="4" nzLg="6" nzXl="12"
                            style="display: flex;justify-content: flex-end">
                            <form nz-form [nzLayout]="'inline'">
                                <nz-form-item>
                                    <button nz-button nzType="primary" (click)="add()" nzJustify="end">
                                        <i nz-icon nzType="plus"></i>{{'tour-and-travel-loan.button1'|translate }}
                                    </button>
                                </nz-form-item>
                            </form>
                        </div>
                    </div>
                    <nz-table [nzShowPagination]="false" style="height: 250px;" class="my-scroll no-wrap1" nzBordered
                        #table [nzFrontPagination]="false" [nzData]="dataList" [nzLoading]="loadingRecords"
                        [nzTotal]="totalRecords" [(nzPageIndex)]="pageIndex" [(nzPageSize)]="pageSize">
                        <thead>
                            <tr>
                                <th>{{'tour-and-travel-loan.th8'|translate }}</th>
                                <th>{{'tour-and-travel-loan.th9'|translate }}</th>
                                <th>{{'tour-and-travel-loan.th10'|translate }}</th>
                                <th>{{'tour-and-travel-loan.th11'|translate }}</th>
                                <th>{{'tour-and-travel-loan.th12'|translate }}</th>
                                <th>{{'tour-and-travel-loan.th13'|translate }}</th>
                                <th>{{'tour-and-travel-loan.th14'|translate }}</th>
                                <th>{{'tour-and-travel-loan.th15'|translate }}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let data of table.data;index as i">
                                <td>
                                    <a (click)="edit(data,i)"><i nz-icon nzType="edit" nzTheme="twotone"></i></a>
                                </td>
                                <td> {{data['NAME']}} </td>
                                <td> {{data['PASSPORT_NUMBER']}} </td>
                                <td> {{data['PASSPORT_VALIDITY_DATE']}} </td>
                                <td> {{data['VISA_COUNTRY_NAME']}} </td>
                                <td> {{data['VISA_TYPE']}} </td>
                                <td> {{data['VISA_VALIDITY']}} </td>
                                <td> <i nz-icon *ngIf="data.IS_TAKEN_INSURANCE" [nzType]="'check-circle'"
                                        [nzTheme]="'twotone'" [nzTwotoneColor]="'#52c41a'"></i>
                                    <i nz-icon *ngIf="!data.IS_TAKEN_INSURANCE" [nzType]="'close-circle'"
                                        [nzTheme]="'twotone'" [nzTwotoneColor]="'#f50'"></i> </td>
                            </tr>
                        </tbody>
                    </nz-table>
                </div>
            </div>
        </nz-spin>
    </form>
    <div style="margin-left:900px" *ngIf="CURRENT_STAGE_ID == 8 && extraApplicantInformation.IS_APPROVED == false">
        <button type="button" class="ant-btn ant-btn-primary" nz-button [nzLoading]="isButtonSpinning"
            (click)="save()"><span>{{'tour-and-travel-loan.button2'|translate }}</span></button>
    </div>
</div>

<nz-drawer [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom': '53px' }"
    [nzClosable]="true" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="500" [nzVisible]="drawerVisible"
    [nzTitle]="drawerTitle" (nzOnClose)="drawerClose()" (nzKeyboard)="true">
    <app-family-passport-info [drawerClose]="closeCallback" [data]="drawerData" (demo)="saveWorkdata()">
    </app-family-passport-info>
</nz-drawer>
<nz-drawer [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom': '53px' }"
    [nzClosable]="true" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="500" [nzVisible]="drawerVisible2"
    [nzTitle]="drawerTitle2" (nzOnClose)="drawerClose2()" (nzKeyboard)="true">
    <app-travelplan [drawerClose2]="closeCallback2" [data]="drawerData2" (demo)="saveWorkdata2()" [isAgent]="isAgent">
    </app-travelplan>
</nz-drawer>