<input type="file" id="fileUpload" [accept]="acceptedFileFormats" (change)="bulkUpload($event.target.files.item(0))"
    hidden>



<div nz-row>
    <div nz-col nzSpan="24">

        <button nz-button nzType="primary" class="mr-10" (click)="clickUploadButton(1)">
            <i nz-icon nzType="upload"></i>
            Upload Loan File
        </button>

        <button nz-button nzType="primary" class="mr-10" (click)="clickUploadButton(2)">
            <i nz-icon nzType="upload"></i>
            Upload Guarantor File
        </button>


        <button nz-button nzType="primary" class="mr-10" (click)="clickUploadButton(3)">
            <i nz-icon nzType="upload"></i>
            Upload Deposit File
        </button>


    </div>

</div>



<nz-spin [nzSpinning]="loadPreviewTable">
    <div *ngIf="preview" nz-row style="margin-top: 20px;margin-bottom: 30px;">

        <div nz-col nzSpan="14" class="my-box">
            <app-personal-table-template [data]="fileData" [loading]="loadPreviewTable"
                [columns]="columns"></app-personal-table-template>
        </div>

        <div nz-col nzSpan="1"></div>

        <div nz-col nzSpan="9" style="overflow-y: scroll;height: 460px;" class="my-box">

            <div nz-row>
                <div nz-col nzSpan="24" *ngFor="let errorCard of errorList;index as i"
                    style="display: flex;justify-content: center;">
                    <nz-card style="width:320px; margin-top: 20px;margin-bottom: 20px;"
                        [nzActions]="[actionskip, actionOverride]">
                        <nz-card-meta [nzTitle]="errorCard.title"
                            [nzDescription]='errorCard.description'></nz-card-meta>
                    </nz-card>

                    <ng-template #actionskip>
                        <button nz-button (click)="skipOne(errorCard.exact_row,i)">Skip</button>
                    </ng-template>

                    <ng-template #actionOverride>
                        <button nz-button nzType="primary" nzDanger
                            (click)="overrideOne(errorCard.exact_row,i)">Override</button>
                    </ng-template>
                </div>
            </div>


        </div>

    </div>
</nz-spin>


<div class="footer" *ngIf="preview">

    <span *ngIf="errorList.length == 0">
        <button nz-button class="mr-10" (click)="cancel()">Cancel</button>
        <button nz-button nzType="primary" (click)="save()">Save & Close</button>
        <!-- <button nz-button class="mr-10" *ngIf="mode == 2">Skip & Continue</button>
      <button nz-button nzType="primary" *ngIf="mode == 2">Save & Continue</button> -->
    </span>


    <span *ngIf="errorList.length > 0">
        <button nz-button class="mr-10" (click)="skipAll()">Skip All</button>
        <button nz-button nzType="primary" nzDanger (click)="overrideAll()">Override All</button>
    </span>

</div>