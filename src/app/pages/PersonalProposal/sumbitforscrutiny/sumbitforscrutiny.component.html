<div>
    <form nz-form>
        <nz-spin [nzSpinning]="isSpinning">

            <form nz-form style="padding:0px 10px;">
                <div nz-row>
                    <div nz-col nzSpan="10">
                        <h3>Tabs Status (✓ is Approved)</h3>
                        <div nz-row *ngFor="let datas of IndivisualInfotabs" style="margin-bottom: 10px;">
                            <div nz-col nzSpan="4">
                                <label style="color: green;">✓</label>
                                <!-- <label *ngIf="datas.IS_APPROVED==0" style="color: red;"> ✗</label> -->
                            </div>
                            <div nz-col nzSpan="20">
                                <span *ngIf="browserLang =='mr' "> {{datas.EXTRA_INFORMATION_NAME}}</span>
                                <span *ngIf="browserLang =='kn' "> {{datas.NAME_KN}}</span>
                                <span *ngIf="browserLang =='en' "> {{datas.NAME_EN}}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div nz-col nzSpan="14">
                        <div *ngIf="roleId == '4'" nz-col [nzLg]="{ span: 22, offset: 1 }">
                          <nz-form-item>
                            <nz-form-label *ngIf="browserLang == 'kn'" nzNoColon>
                              {{ 'gcreditinfo.label2' | translate }}
                            </nz-form-label>
                            <nz-form-label *ngIf="browserLang != 'kn'" nzNoColon>
                              For additional securities of loan whether P.D. cheque of Nationalised Bank obtained?
                            </nz-form-label>
                            <nz-form-control>
                              <nz-switch name="IS_CHECK_OBTAINED" [(ngModel)]="IS_CHECK_OBTAINED" 
                                nzCheckedChildren="{{ 'gcreditinfo.switch.child1' | translate }}" 
                                nzUnCheckedChildren="{{ 'gcreditinfo.switch.child2' | translate }}">
                              </nz-switch>
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                        
                        <div *ngIf="roleId == '4'" nz-col [nzLg]="{ span: 22, offset: 1 }">
                          <nz-form-item>
                            <nz-form-label *ngIf="browserLang == 'kn'" nzNoColon>
                              {{ 'gcreditinfo.label2' | translate }}
                            </nz-form-label>
                            <nz-form-label *ngIf="browserLang != 'kn'" nzNoColon>
                              Whether residential certificate and identity card of the applicant obtained?
                            </nz-form-label>
                            <nz-form-control>
                              <nz-switch name="IS_IDENTITY_CARD_OBTAINED" [(ngModel)]="IS_IDENTITY_CARD_OBTAINED" 
                                nzCheckedChildren="{{ 'gcreditinfo.switch.child1' | translate }}" 
                                nzUnCheckedChildren="{{ 'gcreditinfo.switch.child2' | translate }}">
                              </nz-switch>
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                    </div>

                    <div nz-col nzSpan="14">
                        <nz-table nzBordered #table nzShowSizeChanger="false" [nzLoading]="isSpinning"
                            [nzFrontPagination]="false" [nzData]="IndivisualInfotabs">
                            <thead>
                                <tr>
                                    <th style="width: 10px;">{{'remark1.label' | translate}}</th>
                                    <th style="width: 10px;">{{'remark1.label2' | translate}}</th>
                                    <th style="width: 10px;">{{'remark1.label1' | translate}}</th>
                                    <th style="width: 10px;">{{'remark1.label3' | translate}}</th>

                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let data of remark1">
                                    <td>
                                        {{data.USER_NAME}}
                                    </td>
                                    <td>

                                        {{data.ROLE_NAME}}
                                    </td>
                                    <td>
                                        {{data.DATE}}
                                    </td>
                                    <td>
                                        {{data.REMARK}}
                                    </td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </div>


                </div>


                <div nz-row>

                    <div nz-col nzSpan="12"></div>
                    <div nz-col nzSpan="12">



                        <div nz-col nzSpan="24" style="margin-top: 10px;"
                            *ngIf="data.CURRENT_STAGE_ID == 14 && roleId =='14'">
                            <nz-select name="Loanid" nzShowSearch style="width: 100%"
                                nzPlaceHolder="{{'remark1.agm' | translate}} " [(ngModel)]="data.AGM_ID">

                                <nz-option *ngFor="let val of dataList12" [nzValue]="val.ID" [nzLabel]="val.NAME">
                                </nz-option>
                            </nz-select>


                        </div>


                        <div nz-col nzSpan="24">
                            <nz-form-label nzRequired nzNoColon *ngIf="roleId =='4'">
                                {{'joinbranch.bmopinion'|translate}}
                            </nz-form-label>
                            <nz-form-label nzRequired nzNoColon *ngIf="roleId =='5'">
                                {{'joinbranch.baopinion'|translate}}
                            </nz-form-label>
                            <nz-form-label nzRequired nzNoColon *ngIf="roleId =='12'">
                                {{'joinbranch.aloopinion'|translate}}
                            </nz-form-label>
                            <nz-form-label nzRequired nzNoColon *ngIf="roleId =='14'">
                                {{'joinbranch.loopinion'|translate}}
                            </nz-form-label>
                            <nz-form-label nzRequired nzNoColon *ngIf="roleId =='13'">
                                {{'joinbranch.hoopinion'|translate}}
                            </nz-form-label>
                            <nz-form-control>

                                <textarea nz-input rows="2" name="BRANCH_OPINION_TEXT" [(ngModel)]="REMARKS"></textarea>
                            </nz-form-control>
                        </div>




                    </div>

                </div>






                <div nz-row>

                    <div nz-col nzSpan="12"></div>

                    <div nz-col nzSpan="12" style="text-align: right;">

                        <button type="button" class="ant-btn ant-btn-primary" style="margin: 10px;" nz-button
                            [nzLoading]="isButtonSpinning" [disabled]="isRejectButtonDisabled"
                            (click)="SumbitforApproval()"><span *ngIf="roleId !='5'">{{
                                'basicinfo.m6'|
                                translate}}</span><span *ngIf="roleId =='5'">{{
                                'common.Save_&_Close'|
                                translate}}</span></button>


                        <button type="button" class="ant-btn ant-btn-primary" style="margin: 10px;" *ngIf="roleId !='5'"
                            nz-button [nzLoading]="isButtonSpinning" (click)="SendToRefill()"
                            [disabled]="isRejectButtonDisabled">
                            <span>{{ 'basicinfo.m5' | translate }}</span>
                        </button>



                        <!-- <button type="button" style="margin: 10px;" class="ant-btn ant-btn-primary"
                            *ngIf="roleId !='5' && roleId !='19'" nz-button [nzLoading]="isButtonSpinning"
                            (click)="toggleFieldsVisibility()"><span>{{'Reject'}}</span></button> -->











                        <button nz-button nzType="primary" *ngIf="roleId != '5'  && roleId != '12'"
                            (click)="showModal()">
                            <span>Reject Proposal</span>
                        </button>
                        <nz-modal [(nzVisible)]="isVisible" [nzTitle]="modalTitle" [nzContent]="modalContent"
                            [nzFooter]="modalFooter" (nzOnCancel)="handleCancel()">
                            <ng-template #modalTitle>Reject</ng-template>

                            <ng-template #modalContent>
                                <div nz-col nzSpan="24" style="margin-top: 10px;">
                                    <nz-form-item>
                                        <nz-form-label>Upload Reject Note</nz-form-label>
                                        <nz-form-control>
                                            <input type="file" #file1 accept="application/pdf"
                                                (change)="onFileSelectedFile1($event)" />
                                        </nz-form-control>
                                    </nz-form-item>

                                </div>




                            </ng-template>

                            <ng-template #modalFooter>

                                <button nz-button nzType="default" (click)="handleCancel()">Cancle</button>
                                <button nz-button nzType="primary" (click)="uploadfile()"
                                    [nzLoading]="isConfirmLoading">Submit</button>
                            </ng-template>
                        </nz-modal>


                    </div>


                </div>








                <div nz-row>
                    <div nz-col nzSpan="10"></div>
                    <div nz-col nzSpan="14" *ngIf="showAdditionalFields">

                        <div *ngIf="roleId =='4'" nz-col nzSpan="24">
                            <nz-form-item>
                                <div nz-col nzSpan="24">
                                    <nz-form-label nzRequired nzNoColon>Remarks
                                    </nz-form-label>
                                    <nz-form-control>
                                        <textarea nz-input rows="2" name="Additional Field 1"
                                            [(ngModel)]="data.REJECTREMARK"></textarea>
                                    </nz-form-control>
                                </div>

                                <div nz-col nzSpan="24" style="margin-top: 10px;">
                                    <nz-form-item>
                                        <nz-form-label>Upload Note</nz-form-label>
                                        <nz-form-control>
                                            <input type="file" #file1 accept="application/pdf"
                                                (change)="onFileSelectedFile1($event)" />
                                        </nz-form-control>
                                    </nz-form-item>

                                </div>
                                <div nz-col nzSpan="24" style="margin-top: 10px;text-align: right;">
                                    <button type="button" class="ant-btn ant-btn-primary" nz-button
                                        [nzLoading]="isButtonSpinning" (nzOnConfirm)="uploadfile()" nz-popconfirm
                                        nzPopconfirmTitle="Are you sure?" (nzOnCancel)="cancel()"
                                        nzPopconfirmPlacement="top">
                                        <span>{{ 'Save & Close'}}</span>
                                    </button>
                                </div>

                            </nz-form-item>
                        </div>



                    </div>
                </div>



            </form>
        </nz-spin>
    </form>

</div>